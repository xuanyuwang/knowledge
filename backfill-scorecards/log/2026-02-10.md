# Project Log - 2026-02-10

## Progress

- Created `rerun_sequential.py` - Python script for sequential day-by-day backfill with progress tracking
- Created `rerun_sequential.sh` - Shell script version of sequential backfill
- Ran sequential backfill for cvs and oportun (Jan 1-31, one day at a time)
- Days 1-5, 8 completed successfully; days 6-7 timed out (>1hr); days 9-31 failed due to VPN/network disconnect

## Details

### Why Sequential?

Yesterday's parallel approach (all 31 days at once) caused issues. Today switched to a sequential approach: process one day at a time, wait for completion, then move to next.

### Sequential Python Script (`rerun_sequential.py`)

Built a Python script with:
- **Progress tracking** via `sequential_tracking.json` - survives interruptions, can resume
- **Port-forward management** - auto-restarts kubectl port-forward if it dies
- **Temporal workflow monitoring** - discovers spawned workflows and polls until completion
- **Commands**: `--status` (show progress), `--reset DAY` (reset a failed day), default (run)
- Max wait per day: 1 hour, poll interval: 30 seconds

### Run Results

| Days | Status | Notes |
|------|--------|-------|
| Jan 1 | Completed | Pre-completed from yesterday's test |
| Jan 2 | Completed | ~67 min (cvs is slow) |
| Jan 3 | Completed | ~33 min |
| Jan 4 | Completed | ~3 min |
| Jan 5 | Completed | ~67 min |
| Jan 6 | Failed | Timeout after 1 hour |
| Jan 7 | Failed | Timeout after 1 hour |
| Jan 8 | Completed | ~40 min |
| Jan 9-31 | Failed | VPN/network disconnect - kubectl couldn't reach EKS cluster |

### Failure Analysis

1. **Days 6-7**: Workflow timeout (>1hr). These are likely weekdays with high conversation volume for cvs. May need to increase `MAX_WAIT_PER_DAY` or run separately.
2. **Days 9-31**: VPN dropped. Errors show `dial tcp 10.8.188.43:443: connect: network is unreachable` and later `no such host`. Need to reconnect VPN and re-run with `--reset` for failed days.

### Next Steps

- [ ] Reconnect VPN and reset failed days 6-31
- [ ] Consider increasing timeout for high-volume days (Mon-Fri)
- [ ] Re-run: `python3 rerun_sequential.py` (will skip completed days 1-5, 8)
